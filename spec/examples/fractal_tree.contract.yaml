# Interface Contract Specification for Unity FractalTree Component
# This specification defines the behavioral contract for the FractalTree system

spec_version: "1.0"
kind: contract
name: fractal_tree_interface
description: "Behavioral contract for Unity FractalTree component with foglet integration"

interface:
  component: FractalTree
  namespace: UtilityFog.Fractals
  
  inputs:
    - name: depth
      type: integer
      constraints:
        - min: 0
        - max: 12
      description: "Maximum recursion depth for fractal generation"
      
    - name: branch_angle
      type: float
      constraints:
        - min: 0.0
        - max: 180.0
      description: "Angle between branches in degrees"
      
    - name: scale_factor
      type: float
      constraints:
        - min: 0.1
        - max: 1.0
      description: "Scale reduction factor for child branches"
      
    - name: foglet_density
      type: float
      constraints:
        - min: 0.0
        - max: 1.0
      description: "Density of foglet agents per branch segment"

  outputs:
    - name: branch_count
      type: integer
      description: "Total number of generated branches"
      
    - name: foglet_count
      type: integer
      description: "Total number of spawned foglet agents"
      
    - name: generation_time_ms
      type: float
      description: "Time taken for complete tree generation"

invariants:
  - name: depth_consistency
    expression: "depth >= 0 AND depth <= 12"
    description: "Depth must remain within safe computational bounds"
    
  - name: branch_count_exponential
    expression: "branch_count <= 2^depth"
    description: "Branch count follows exponential growth pattern"
    
  - name: foglet_distribution
    expression: "foglet_count <= branch_count * foglet_density * 100"
    description: "Foglet count respects density constraints"

side_effects:
  - name: unity_gameobject_creation
    description: "Creates Unity GameObjects for each branch in scene hierarchy"
    
  - name: foglet_agent_spawning
    description: "Instantiates foglet agents with network connectivity"
    
  - name: memory_allocation
    description: "Allocates memory proportional to branch_count"
    constraints:
      - "memory_usage_mb <= branch_count * 0.1"

performance_requirements:
  - name: generation_time
    constraint: "generation_time_ms <= 1000 * (depth^2)"
    description: "Generation time scales quadratically with depth"
    
  - name: memory_efficiency
    constraint: "memory_usage_mb <= 100"
    description: "Total memory usage remains under 100MB"
